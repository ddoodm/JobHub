<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

    <!-- The Job Controller is session-scoped, so we must use a new job-->
    <f:metadata>
        <f:viewAction action="#{jobController.prepareNewJob}" />
    </f:metadata>

    <f:view>
        <ui:composition template="common.xhtml">
            <ui:define name="content">

                <div class="container">
                    <h1>Sign Up with JobHub</h1>
                    <p>We're excited to have you along for the ride! Register here to start creating and doing jobs.</p>

                    <h:form id="registerForm">
                        <div class="panel panel-default">
                            <div class="panel-body">

                                <h2>Account Details</h2>

                                <div class="form-group">
                                    <h:outputLabel value="Username" styleClass="pull-left" />
                                    <h:message for="username"  styleClass="pull-right error" />
                                    <h:inputText
                                        id="username"
                                        a:placeholder="Pick a username"
                                        styleClass="form-control"
                                        value=""/>
                                </div>

                                <div class="form-group">
                                    <h:outputLabel value="E-Mail" styleClass="pull-left" />
                                    <h:message for="email"  styleClass="pull-right error" />
                                    <h:inputText
                                        id="email"
                                        a:placeholder="Write your E-Mail address"
                                        styleClass="form-control"
                                        value=""/>
                                </div>

                                <div class="form-group">
                                    <h:outputLabel value="Password" styleClass="pull-left" />
                                    <h:message for="password"  styleClass="pull-right error" />
                                    <h:inputSecret
                                        id="password"
                                        a:placeholder="Write a password"
                                        styleClass="form-control"
                                        value=""/>
                                </div>

                                <div class="form-group">
                                    <h:outputLabel value="Password Confirmation" styleClass="pull-left" />
                                    <h:inputSecret
                                        id="passwordConfirm"
                                        a:placeholder="Re-type your password for confirmation"
                                        styleClass="form-control"
                                        value=""/>
                                </div>

                                <hr />
                                <h2>Account Type</h2>
                                <h:selectOneRadio styleClass="inline-radio-buttons">
                                    <f:selectItem itemValue="Employee" itemLabel="Employee" />
                                    <f:selectItem itemValue="Employer" itemLabel="Employer" />
                                </h:selectOneRadio>

                                <hr />
                                <h2>Personal Details</h2>

                                <div class="form-group">
                                    
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h:outputLabel value="Your Name" styleClass="pull-left" />
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h:message for="givenName"  styleClass="pull-right error" />
                                            <h:inputText
                                                id="givenName"
                                                a:placeholder="Your first name"
                                                styleClass="form-control"
                                                value=""/>
                                        </div>
                                        <div class="col-md-6">
                                            <h:message for="surname"  styleClass="pull-right error" />
                                            <h:inputText
                                                id="surname"
                                                a:placeholder="Your surname"
                                                styleClass="form-control"
                                                value=""/>
                                        </div>
                                    </div>

                                </div>

                                <div class="form-group">
                                    <h:outputLabel value="Company (optional)" styleClass="pull-left" />
                                    <h:message for="company"  styleClass="pull-right error" />
                                    <h:inputText
                                        id="company"
                                        a:placeholder="Write your company name (optional)"
                                        styleClass="form-control"
                                        value=""/>
                                </div>

                                <hr />

                                <div class="btn-toolbar pull-right">
                                    <h:button value="Cancel" outcome="home" styleClass="btn btn-default" />
                                    <h:commandButton
                                        value="Sign Up"

                                        styleClass="btn btn-primary" />
                                </div>

                            </div>
                        </div>
                    </h:form>
                </div>

            </ui:define>

            <ui:define name="scripts">
                <script type="text/javascript">
                    // Configures password confirmation
                    var passwordField = $('#registerForm\\:password');
                    var passwordConfirmField = $('#registerForm\\:passwordConfirm');

                    passwordField.on('input', updatePasswordValidator);
                    passwordConfirmField.on('input', updatePasswordValidator);

                    function updatePasswordValidator(event)
                    {
                        var password = passwordField.val();
                        var passwordConfirmed = passwordConfirmField.val();
                        var confirmationMatches = password === passwordConfirmed;

                        if (confirmationMatches)
                            passwordConfirmField.removeClass("error");
                        else
                            passwordConfirmField.addClass("error");
                    }
                </script>
            </ui:define>

        </ui:composition>
    </f:view>
</html>
